# Template file for 'onlyoffice'
pkgname=onlyoffice
version=9.2.1
revision=1
archs="x86_64"
hostmakedepends="rpmextract tar"
depends="curl nss nspr hicolor-icon-theme curl gtk+3 alsa-lib libpulseaudio gstreamer1 gst-plugins-ugly1 dejavu-fonts-ttf liberation-fonts-ttf"
short_desc="An office suite that combines text, spreadsheet and presentation editors"
maintainer="Eren Öztürk <erenozturkhde@gmail.com>"
license="AGPL-3.0-only"
homepage="https://www.onlyoffice.com/"
options=('!strip' '!emptydirs')
distfiles="https://github.com/ONLYOFFICE/DesktopEditors/releases/download/v${version}/onlyoffice-desktopeditors.x86_64.rpm"
checksum=739ca54694764c4fd5a140dd3f878f31d9158174e76267512c94a3a09286a514

nopie_files="
/opt/onlyoffice/desktopeditors/DesktopEditors
/opt/onlyoffice/desktopeditors/converter/x2t
/opt/onlyoffice/desktopeditors/editors_helper
"

do_install() {
    vcopy $wrksrc/usr .
    vcopy $wrksrc/opt .
    vmkdir "/usr/bin"
    ln -s /opt/onlyoffice/onlyoffice "$DESTDIR/usr/bin/onlyoffice"
}
