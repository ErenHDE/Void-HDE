# Template file for 'patool'
pkgname=patool
version=4.0.2
revision=1
archs="x86_64"
hostmakedepends="python3-build python3-installer python3-setuptools-reproducible python3-wheel python3-argcomplete"
depends="python3"
short_desc="portable command line archive file manager"
maintainer="Eren Öztürk <erenozturkhde@gmail.com>"
license="GPL-3.0-only"
homepage="https://wummel.github.io/patool/"
distfiles="https://github.com/wummel/patool/releases/download/${version}/patool-${version}.tar.gz"
checksum=e7f62d222f4a8a6c48dbfb38056dc7f9e5778ccc07c1f16d9653a316812f83ba

do_build(){
	cd $wrksrc
	python -m build --wheel --no-isolation
}

do_install(){
	cd $wrksrc
	python -m installer --destdir="$DESTDIR" dist/*.whl
	vmkdir /usr/share/bash-completion/completions
	register-python-argcomplete patool > "${DESTDIR}/usr/share/bash-completion/completions/patool"
	vinstall 'doc/patool.1' 644 "/usr/share/man/man1"
}
